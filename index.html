<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Protected Links</title>
<style>
body { font-family: Arial; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f0f0; }
#login { text-align: center; padding: 30px; background: white; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.2); }
input { padding: 10px; margin: 5px; width: 200px; }
button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
#links { display: none; margin-top: 20px; text-align: left; }
</style>
</head>
<body>
<div id="login">
    <h2>Enter Password to Access Links</h2>
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkPassword()">Submit</button>
    <div id="links"></div>
</div>

<script>
async function checkPassword() {
    const password = document.getElementById('password').value;

    const response = await fetch('/.netlify/functions/check-password', {
        method: 'POST',
        body: JSON.stringify({ password }),
    });

    const result = await response.json();

    if(result.success){
        const linksDiv = document.getElementById('links');
        linksDiv.innerHTML = "<h3>Your Links:</h3><ul>";
        result.links.forEach(link => {
            linksDiv.innerHTML += `<li><a href="${link}" target="_blank">${link}</a></li>`;
        });
        linksDiv.innerHTML += "</ul>";
        linksDiv.style.display = 'block';
    } else {
        alert(result.message);
    }
}
</script>
</body>
</html>
